---
description: 프로젝트 개요
globs: *.*
alwaysApply: false
---
# GShare 프로젝트 구조 설명
## 프로젝트 개요:
GShare는 Proxmox API를 활용하여 Android VM의 CPU 사용량을 모니터링하고, NFS 마운트 및 SMB 공유 기능을 제공하는 관리 도구입니다. 이 애플리케이션은 Docker 환경에서 실행되도록 설계되었습니다.

## 프로젝트 구조:
/
├── app/ # 애플리케이션 코드
│ ├── gshare_manager.py # 메인 애플리케이션 파일
│ ├── web_server.py # Flask 웹 서버 구현
│ ├── config.py # 설정 로드 및 관리 클래스
│ ├── templates/ # Flask 템플릿 디렉토리
│ │ ├── index.html # 메인 대시보드 페이지
│ │ ├── landing.html # 초기 설정 페이지
│ │ └── settings.html # 설정 페이지
│ └── static/ # 정적 파일 디렉토리
│ ├── css/ # CSS 파일
│ └── scripts.js # 자바스크립트 파일
├── config/ # 설정 파일 디렉토리 (볼륨)
│ └── config.yaml # 애플리케이션 설정 파일
├── logs/ # 로그 파일 디렉토리 (볼륨)
├── Dockerfile # Docker 이미지 빌드 파일
├── docker-compose.yml # Docker 컴포즈 설정
├── docker-entrypoint.sh # Docker 컨테이너 시작 스크립트
├── docker-README.md # Docker 사용 설명서
├── config.yaml.template # 설정 파일 템플릿
└── requirements.txt # Python 종속성 목록

## 핵심 구성 요소:
- app/gshare_manager.py: 
메인 애플리케이션 파일로, 다음 클래스들을 포함합니다:
    - ProxmoxAPI: Proxmox VE API와 통신하는 클래스
    - FolderMonitor: NFS 마운트와 SMB 공유를 관리하는 클래스
    - GShareManager: 전체 애플리케이션 로직을 조정하는 클래스
- app/web_server.py
Flask 기반 웹 서버로 다음 기능을 제공합니다:
    - 대시보드 UI (실시간 상태 확인)
    - 랜딩 페이지 (초기 설정)
    - 설정 관리 인터페이스
    - REST API 엔드포인트
- app/config.py
설정 관리 클래스:
    - YAML 파일에서 설정 로드
    - 설정 업데이트 및 저장
    - 기본값 및 템플릿 설정 관리

## Docker 환경
Dockerfile: Python 3.9 기반 이미지 정의
docker-compose.yml: 볼륨과 네트워크 설정
docker-entrypoint.sh: 컨테이너 시작 시 초기화 작업

## 기술 스택:
Python 3.9
Flask (웹 프레임워크)
Proxmox VE API
NFS 및 SMB 프로토콜
Docker 및 Docker Compose

## 데이터 저장 및 설정:
/config 디렉토리: 설정 파일(config.yaml) 저장
/logs 디렉토리: 애플리케이션 로그 저장
/mnt/gshare: NFS 마운트 지점
/mnt/gshare_links: SMB 공유를 위한 심볼릭 링크 저장

## 주요 기능 흐름:
초기 실행 시 랜딩 페이지에서 설정 입력
Proxmox VM의 CPU 사용량 모니터링
NFS 마운트 관리
SMB 공유 설정 및 관리
VM 자동 종료 (CPU 사용량이 임계치 이하로 떨어질 경우)

